# Invariants & Guardrails — V0 Bounded Critique‑Led Solver

These are non‑negotiable. Implementation details are intentionally open.

## Always true (per run)

1. **Critique is mandatory**: at least one critic step runs every time.
2. **Traceability**: produce one `run_id` and persist one `RunRecord` per request.
3. **Transparency fields**: `SolveResponse.assumptions[]` and `SolveResponse.known_issues[]` are always present (empty arrays allowed).
4. **No silent constraint loss**: constraints are never dropped; ambiguities are surfaced as assumptions/known issues.
5. **Budget enforcement**:
   - enforce model call cap
   - enforce timeouts
   - enforce **max 1 revision loop**
6. **Graceful degradation**: on parse failures/timeouts/provider errors, return best‑effort output and log failures.

## Seams for future governance (must be preserved)

7. **Generator and Critic are independently replaceable** (separate calls, artifacts, prompts).
8. **Provenance**: RunRecord includes model + prompt version(s) + config snapshot id/hash.
9. **Append‑only RunRecords** for V0 (no in‑place mutation).

## Definition of Done (minimum)

- `/solve` returns `final_answer`, `assumptions`, `known_issues`, `run_id`
- critique always runs
- ≤1 revision
- RunRecord persisted with intermediate artifacts
